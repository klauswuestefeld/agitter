<project name="git tasks" basedir=".">
	<macrodef name="git">
		<attribute name = "command" />
		<attribute name = "dir" default = "" />
		<element name = "args" optional = "true" />
		<sequential>
			<echo message="git @{command}"/>
			<exec executable = "git" dir = "@{dir}">
				<arg value = "@{command}"/>
				<args/>
			</exec>
		</sequential>
	</macrodef>

	<macrodef name = "git-add">
		<attribute name = "path" />
		<attribute name = "target" />
		<sequential>
			<git command = "add" dir="@{path}">
				<args><arg value = "@{target}" /></args>
			</git>
		</sequential>
	</macrodef>

	<macrodef name = "git-commit">
		<attribute name = "path" />
		<attribute name = "message" />
		<sequential>
			<git command="commit" dir="@{path}">
				<args><arg value= "@{message}" /></args>
			</git>
		</sequential>
	</macrodef>

	<macrodef name = "git-clone-pull">
		<attribute name = "repository" />
		<attribute name = "dest" />
		<sequential>
			<git command = "clone">
				<args>
					<arg value = "@{repository}" />
					<arg value = "@{dest}" />
				</args>
			</git>
			<git command = "pull" dir = "@{dest}" />
		</sequential>
	</macrodef>

	<macrodef name = "git-push">
		<attribute name = "path" />
		<attribute name = "branch" />
		<attribute name = "head" />
		<sequential>
			<git command = "push" dir="@{path}">
				<args>
					<arg value = "@{branch}" />
					<arg value = "@{head}" />
				</args>
			</git>
		</sequential>
	</macrodef>

</project>
