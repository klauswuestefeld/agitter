package infra.simploy.tests;

import sneer.foundation.testsupport.TestWithMocks;

public class SimployTest extends TestWithMocks {
//
//	private static final File ROOT = new File("builds");
//
//	private final Simploy.Worker worker = mock(Simploy.Worker.class);
//
//	
//	@Test
//	public void success() throws Exception {
//		firstTimeSuccessfulExpectations();
//		closingExpectations();
//		initSubject();
//	}
//
//
//	private void firstTimeSuccessfulExpectations() throws Exception {
//		checking(new Expectations() {{
//			exactly(1).of(worker).findLastGoodBuildFolderIn(ROOT); inSequence();
//				will(returnValue(null));
//			File build1 = new File("builds/build1");
//			exactly(1).of(worker).generateNewBuildIn(ROOT); inSequence();
//				will(returnValue(build1));
//			exactly(1).of(worker).execIn("ant run -Dlast-good-build=no-good-build", build1); inSequence();
//			exactly(1).of(worker).waitForBuildResultFileIn(build1); inSequence();
//		}});
//	}
//	
//	
//	private void closingExpectations() {
//		checking(new Expectations() {{
//			exactly(1).of(worker).shouldDeployNextBuild(); inSequence();
//				will(returnValue(false));
//		}});
//	}
//
//	
//	private void initSubject() {
//		new Simploy(ROOT, worker);
//	}
		
}


